DROP TABLE IF EXISTS `messages`;
CREATE TABLE `messages` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `order_number` char(32) not null default '' comment '订单编号',
    `merchant_id` int unsigned NOT NULL DEFAULT '0' COMMENT '商户编号',
    `merchant_name` varchar(32) NOT NULL DEFAULT '' COMMENT '商户名称',
    `app_id` int unsigned NOT NULL DEFAULT '0' COMMENT '管理员编号',
    `app_name` varchar(32) NOT NULL DEFAULT '' COMMENT '管理员名称',
    `channel_id` int not null default 0 comment '渠道编号',
    `country_id` int not null default 0 comment '国家编号',
    `phone_prefix` varchar(16) not null default '号码前缀',
    `phone` varchar(32) not null default '' comment '手机号码',
    `phone_full` varchar(32) not null default '' comment '手机号码',
    `template_id` int unsigned not null default 0 comment '模板编号',
    `state` tinyint unsigned not null default 0 comment '状态',
    `content` varchar(256) not null default '' comment '内容',
    `request_url` varchar(256) not null default '' comment '请求URL',
    `request_result` varchar(512) not null default '' comment '请求结果',
    `message_id` varchar(128) not null default '' comment '短信id',
    `created` bigint unsigned NOT NULL DEFAULT '0' COMMENT '添加时间',
    `send_time` bigint unsigned not null default 0 comment '发送时间',
    `failure` int unsigned not null default 0 comment '失败次数',
    `sent_time` bigint unsigned not null default 0 comment '成功时间',
    `remark` varchar(256) NOT NULL DEFAULT '' COMMENT '备注',
    INDEX(merchant_id),
    INDEX(app_id),
    INDEX(channel_id),
    INDEX(template_id),
    INDEX(state),
    INDEX(phone),
    INDEX(`order_number`),
    INDEX(`failure`),
    INDEX(country_id),
    PRIMARY KEY (`id`, `created`)
) ENGINE=InnoDB AUTO_INCREMENT=100000 DEFAULT CHARSET=utf8mb3
 PARTITION BY RANGE (`created`)
( PARTITION P202210 VALUES LESS THAN (1667232000000000) ENGINE = InnoDB,
  PARTITION P202211 VALUES LESS THAN (1669824000000000) ENGINE = InnoDB,
  PARTITION P202212 VALUES LESS THAN (1672502400000000) ENGINE = InnoDB,
  PARTITION P202301 VALUES LESS THAN (1675180800000000) ENGINE = InnoDB,
  PARTITION P202302 VALUES LESS THAN (1677600000000000) ENGINE = InnoDB,
  PARTITION P202303 VALUES LESS THAN (1680278400000000) ENGINE = InnoDB,
  PARTITION P202304 VALUES LESS THAN (1682870400000000) ENGINE = InnoDB,
  PARTITION P202305 VALUES LESS THAN (1685548800000000) ENGINE = InnoDB,
  PARTITION P202306 VALUES LESS THAN (1688140800000000) ENGINE = InnoDB,
  PARTITION P202307 VALUES LESS THAN (1690819200000000) ENGINE = InnoDB,
  PARTITION P202308 VALUES LESS THAN (1693497600000000) ENGINE = InnoDB,
  PARTITION P202309 VALUES LESS THAN (1696089600000000) ENGINE = InnoDB,
  PARTITION P202310 VALUES LESS THAN (1698768000000000) ENGINE = InnoDB,
  PARTITION P202311 VALUES LESS THAN (1701360000000000) ENGINE = InnoDB,
  PARTITION P202312 VALUES LESS THAN (1704038400000000) ENGINE = InnoDB,
  PARTITION P202401 VALUES LESS THAN (1706716800000000) ENGINE = InnoDB);